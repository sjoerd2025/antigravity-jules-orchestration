{
  "id": "documentation-sync",
  "name": "Documentation Sync",
  "description": "Triggers on main branch pushes that touch code files, auto-generates/updates docs and OpenAPI specs",
  "trigger": {
    "type": "github_webhook",
    "event": "push",
    "branch": "main",
    "path_filter": ["src/**/*.ts", "src/**/*.go", "src/**/*.py"]
  },
  "task": {
    "repo": "{{repo_name}}",
    "title": "Docs: Update for {{commit_sha_short}}",
    "description": "Sync documentation with code changes from {{commit_message}}.\n\nUpdate JSDoc/docstrings, README examples, and API reference. Generate OpenAPI spec if endpoints changed.",
    "labels": ["documentation", "automated"],
    "approval_required": false,
    "scope": ["docs/", "README.md", "*.md"],
    "safety_checks": ["links_valid", "examples_tested"]
  },
  "post_actions": [
    {"type": "deploy_docs", "target": "agent.scarmonit.com/docs"},
    {"type": "github_comment", "target": "commit", "message": "Documentation updated automatically"}
  ]
}